<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ‰¾æ‰¾èŠ’æœå®¶æ—ï½çœ‹ä½ èªå¾—å¹¾å€‹ï¼ğŸ‹</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
    body { font-family: "Inter", Arial, sans-serif; }
    button:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(255, 127, 80, 0.4); }
    button:active { transform: translateY(0); box-shadow: none; }
    .game-rules { border-left: 5px solid #F97316; background-color: #FEF3C7; }
    #answer_select {
        appearance: none;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23ea580c'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd' /%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 1.5rem 1.5rem;
        padding-right: 2.5rem;
    }
</style>
</head>
<body class="bg-amber-50 min-h-screen flex items-center justify-center p-4">

<div class="bg-white p-6 md:p-10 rounded-xl shadow-2xl max-w-lg w-full">
    <h1 class="text-3xl font-extrabold text-center text-orange-600 mb-6 border-b pb-3">
        æ‰¾æ‰¾èŠ’æœå®¶æ—ï½çœ‹ä½ èªå¾—å¹¾å€‹ï¼ğŸ‹
    </h1>

    <div class="game-rules p-4 mb-6 rounded-lg shadow-md text-gray-700">
        <h3 class="text-xl font-bold text-orange-600 mb-2 flex items-center">
            éŠæˆ²è¦å‰‡ (LLM å¢å¼·ç‰ˆ)
        </h3>
        <ul class="list-disc ml-5 space-y-1 text-sm">
            <li>éŠæˆ²å…±æœ‰ <strong>16 é“é¡Œç›®</strong>ï¼Œæ¯æ¬¡ç©é¡Œç›®é †åºéƒ½æœƒéš¨æ©Ÿè®ŠåŒ–ï¼Œä¸æœƒé‡è¤‡ï¼</li>
            <li>ä½ æœƒçœ‹åˆ°èŠ’æœå®¶æ—æˆå“¡çš„å°ç‰¹å¾µæˆ–å–œå¥½ï¼Œè«‹å¾ä¸‹æ–¹çš„ <strong>ä¸‹æ‹‰é¸å–®</strong> é¸å‡ºä½ èªç‚ºçš„åå­—ã€‚</li>
            <li>é‡åˆ°å¡é—œï¼Ÿåˆ¥æ“”å¿ƒï¼Œå¯ä»¥ä½¿ç”¨ <strong>âœ¨ ç·šç´¢è§£é‡‹å™¨</strong> ä¾†ç²å–æç¤ºï¼Œå¹«ä½ ç ´é—œï¼</li>
        </ul>
    </div>

    <div id="game" class="space-y-4">
        <div id="clues-container">
            <p class="text-sm font-semibold text-gray-500 mb-2" id="question-count">ç¬¬ 1 / 16 é¡Œ</p>
            <div class="clue bg-yellow-100 p-4 rounded-lg shadow-inner text-gray-800" id="clues"></div>
        </div>

        <div class="flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3">
            <button id="tts-button" onclick="speakClue()" class="flex items-center justify-center w-full py-2 text-white font-semibold rounded-lg bg-indigo-500 shadow-md transition duration-300 hover:bg-indigo-600 disabled:opacity-50">
                âœ¨ å”¸å‡ºç·šç´¢
            </button>
            <button id="explainer-button" onclick="getExplanation()" class="flex items-center justify-center w-full py-2 text-white font-semibold rounded-lg bg-purple-500 shadow-md transition duration-300 hover:bg-purple-600 disabled:opacity-50">
                âœ¨ ç·šç´¢è§£é‡‹å™¨
            </button>
        </div>

        <div id="explanation-output" class="p-4 bg-purple-50 rounded-lg border border-purple-200 text-gray-700 text-sm italic" style="display:none;"></div>

        <select id="answer_select" class="w-full p-3 border-2 border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 transition duration-300 text-lg">
            <option value="" disabled selected>-- è«‹é¸æ“‡æ‚¨çš„ç­”æ¡ˆ --</option>
        </select>

        <button onclick="checkAnswer()" class="w-full py-3 text-white font-bold rounded-lg bg-orange-500 shadow-md transition duration-300 hover:bg-orange-600">æäº¤ç­”æ¡ˆ</button>

        <div class="message p-3 rounded-lg text-center" id="message"></div>
    </div>

    <div id="result" class="text-center space-y-4 pt-6" style="display:none;">
        <h2 class="text-4xl font-black text-green-600">ğŸ‰ éŠæˆ²çµæŸï¼ğŸ‰</h2>
        <p class="text-2xl font-bold text-gray-700" id="score"></p>
        <p class="text-lg text-gray-500">æ„Ÿè¬ä½ æŒ‘æˆ°èŠ’æœå®¶æ—å°åµæ¢å¤§å†’éšª ğŸ‹ğŸ˜†</p>
        <button onclick="location.reload()" class="py-2 px-6 text-white font-semibold rounded-full bg-blue-500 hover:bg-blue-600 transition">å†ç©ä¸€æ¬¡</button>
    </div>
</div>

<script>
let membersData = [
    {name:"èŠ’æœå“¥",clues:["äººç”Ÿå·²ç¶“é”åˆ°è»ŸQå·”å³°","å½è…°éƒ½åƒå½ˆåŠ›ç©å…·"]},
    {name:"å°è‹±å§Š",clues:["æ‹ç…§ç•Œçš„äº¤å‰è…¿æˆ°å£«","æ¯æ¬¡å‡ºé¡éƒ½å¿…å‚™å‰ªåˆ€è…³å’Œå´èº«æŠ€èƒ½"]},
    {name:"å®£è±å§Š",clues:["è…¦å­è£¡è£äº†å…¨ä¸–ç•Œäººçš„å–œå¥½è³‡æ–™åº«","å¥¹è®“ä½ æ‡·ç–‘ï¼šç§’å›ç­”å…¨ä¸–ç•Œå•é¡Œ"]},
    {name:"é˜¿ç¦å“¥",clues:["å¸¥ï¼‹æ­Œå–‰é›™æŠ€èƒ½","èµ°è·¯å¸¶BGMçš„å‚³èªªç´šå­˜åœ¨ï¼","èšæœƒäººæ°£ç‹"]},
    {name:"é™³è‡»è‡»",clues:["è…¦ä¸­è‡ªå¸¶ TWICE æ­Œæ›²æ’­æ”¾æ¸…å–®","è½åˆ°æ—‹å¾‹å°±è‡ªå‹•èµ·èˆ"]},
    {name:"é™³å¦¹å¦¹",clues:["éª¨è£‚ç•Œçš„VIP","äºŒæ¬¡å…¥å ´åˆ¸å·²é ˜ï¼","å€‹æ€§è¶…å¼·"]},
    {name:"é™³é˜¿å¡",clues:["å·¦æ‰‹è½‰é­”æ–¹ï¼Œå³æ‰‹ç”©èˆæ­¥","å”¯ä¸€èƒ½åŒæ™‚æ‰“ç ´é‡åŠ›å’Œæ™‚é–“çš„åœ‹ä¸­ç”Ÿ"]},
    {name:"ææ­ªé ­",clues:["äººè¦‹äººæ„›","ç¬‘å®¹æ²»ç™’","èšæœƒç„¦é»"]},
    {name:"å°šå‹³å“¥",clues:["é•·å¾—å¸¥é€£è‡ªæ‹éƒ½å«‰å¦’","è…¿é•·åˆ°æ‹ç…§ä¸ç”¨è§’åº¦","é¡é ­éƒ½è‡ªå‹•æ‹‰é "]},
    {name:"æèŠéº»",clues:["æ´»æ½‘å¯æ„›çš„è‚¥å®…","å®¶è£¡æœ‰Wi-Fiå’Œè€å©†"]},
    {name:"å²³é˜¿æ–‡",clues:["æ¼‚äº®ï¼‹æ­Œå–‰ï¼‹é§•é§›æŠ€è¡“","èµ°åˆ°å“ªéƒ½è‡ªå¸¶æ¼”å”±æœƒï¼‹è»ŠæŠ€è¡¨æ¼”ç§€"]},
    {name:"æè’œçš®",clues:["æ´»åŠ›ç„¡é™","åƒæ’äº†å…©ç™¾ä¼ç‰¹é›»æ± ","æœƒå”±Golden"]},
    {name:"æé˜¿çŸ",clues:["é‡‘å­—å¡”é ‚å°– VIP åº§ä½","é€£èšŠå­éƒ½è¦é ç´„æ‰èƒ½æ¥è¿‘","æ°£å ´å¼·å¤§"]},
    {name:"å»–äº®äº®",clues:["èˆè¹ˆå¥³ç‹é™è‡¨","é€£åœ°æ¿éƒ½è¢«è¸©å‡ºç¯€å¥äº†ï¼"]},
    {name:"å»–å…‰å…‰",clues:["é«˜å¸¥åˆ°é€£å¤©èŠ±æ¿éƒ½æƒ³ä½é ­çœ‹ä»–","èƒ¸å‰å°æ¼æ–—åƒå°ˆå±¬è¨­è¨ˆ","è…³æ‰å¾—åƒåœ¨åœ°æ¿ä¸Šè²¼äº†åŠ é€Ÿå™¨"]},
    {name:"å¥é–”å“¥",clues:["é›²æ—é‡‘åŸæ­¦","å¤–è¡¨å¸¥æ°£ï¼Œæ°£å ´éå‡¡"]}
];

let totalQuestions = membersData.length;
let members = [];
let allNames = membersData.map(m=>m.name).sort();
let current=0, score=0;
const funnyCorrect=["å¤ªæ£’äº†ï¼ä½ æœç„¶èªå¾—ä»–ï¼ğŸ˜†","ç­”å°å•¦ï¼å°åµæ¢å¨æ­¦ï¼ğŸ‰","æ­£ç¢ºï¼èŠ’æœæœƒç‚ºä½ é¼“æŒğŸ‘","Bingo! é€™æ˜¯ä½ çš„åˆ†æ•¸ï¼ğŸ¥³"];
const funnyWrong=["å“å‘€ï¼Œç­”éŒ¯äº†ï½å†è©¦ä¸€æ¬¡ï¼ğŸ˜œ","éŒ¯å•¦ï¼èŠ’æœåœ¨å“­ğŸ˜­","ä¸å°ä¸å°ï¼å¿«é‡æ–°é›†ä¸­ç²¾ç¥ğŸ’¦","Opps! è¬é¡Œå¤ªé›£äº†å—ï¼Ÿ"];

function shuffleArray(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}}

function showClues(){
    if(current>=totalQuestions){showResult();return;}
    const clueDiv=document.getElementById('clues');
    const questionCount=document.getElementById('question-count');
    const selectElement=document.getElementById('answer_select');
    questionCount.innerText=`ç¬¬ ${current+1} / ${totalQuestions} é¡Œ`;
    clueDiv.innerHTML='';
    members[current].clues.forEach((c,i)=>{clueDiv.innerHTML+=`<p class="${i>0?'mt-2':''} text-base"><strong>ç·šç´¢ ${i+1}:</strong> ${c}</p>`;});
    selectElement.innerHTML='<option value="" disabled selected>-- è«‹é¸æ“‡æ‚¨çš„ç­”æ¡ˆ --</option>';
    allNames.forEach(name=>{const option=document.createElement('option');option.value=name;option.text=name;selectElement.appendChild(option);});
    document.getElementById('message').innerText="";
    document.getElementById('message').className="message p-3 rounded-lg text-center";
    const outputDiv=document.getElementById('explanation-output');
    outputDiv.style.display='none'; outputDiv.innerHTML='';
    selectElement.focus();
}

// èªéŸ³å¿µå‡ºç·šç´¢
function speakClue(){
    if(!('speechSynthesis' in window)){alert("æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³åˆæˆåŠŸèƒ½"); return;}
    let text = members[current].clues.join('ã€‚ ');
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'zh-TW';
    speechSynthesis.speak(utterance);
}

// LLM ç·šç´¢è§£é‡‹åŠŸèƒ½ï¼ˆå‰ç«¯ OpenAI APIï¼‰
async function getExplanation(){
    const explainerButton=document.getElementById('explainer-button');
    explainerButton.disabled = true;
    const outputDiv=document.getElementById('explanation-output');
    outputDiv.style.display='block';
    outputDiv.innerHTML='æ­£åœ¨ç”Ÿæˆæç¤º...âœ¨';

    try {
        // ä½¿ç”¨ fetch å‘¼å« OpenAI API
        const response = await fetch("https://api.openai.com/v1/chat/completions", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer YOUR_OPENAI_API_KEY"
            },
            body: JSON.stringify({
                model: "gpt-4",
                messages: [
                    {
                        role: "user",
                        content: `è«‹ç”¨ç°¡çŸ­ã€å¹½é»˜çš„æ–¹å¼å¹«æˆ‘è§£é‡‹é€™äº›ç·šç´¢ï¼Œæç¤ºæˆå“¡åå­—ï¼Œä½†ä¸è¦ç›´æ¥èªªå‡ºåå­—ï¼š${members[current].clues.join(' / ')}`
                    }
                ],
                temperature:0.7,
                max_tokens:150
            })
        });
        const data = await response.json();
        const explanation = data.choices[0].message.content;
        outputDiv.innerHTML = explanation;
    } catch (err) {
        outputDiv.innerHTML = "å–å¾—æç¤ºå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚";
        console.error(err);
    } finally {
        explainerButton.disabled = false;
    }
}

function checkAnswer(){
    const submitButton=document.querySelector('button[onclick="checkAnswer()"]');
    const explainerButton=document.getElementById('explainer-button');
    const ttsButton=document.getElementById('tts-button');
    submitButton.disabled=true; explainerButton.disabled=true; ttsButton.disabled=true;
    const selectElement=document.getElementById('answer_select');
    const userAnswer=selectElement.value;
    const messageDiv=document.getElementById('message');
    const correctAnswer=members[current].name;
    if(userAnswer===""){messageDiv.innerText="è«‹é¸æ“‡ä¸€å€‹æˆå“¡åç¨±ï¼";messageDiv.className="message p-3 rounded-lg text-center bg-yellow-200 text-yellow-800";submitButton.disabled=false;explainerButton.disabled=false;ttsButton.disabled=false;return;}
    if(userAnswer===correctAnswer){messageDiv.innerHTML=`âœ… <strong>ç­”å°å•¦ï¼</strong> ${correctAnswer}ï¼ ${funnyCorrect[Math.floor(Math.random()*funnyCorrect.length)]}`;messageDiv.className="message p-3 rounded-lg text-center bg-green-200 text-green-800";score++;} 
    else {messageDiv.innerHTML=`âŒ <strong>ç­”éŒ¯å•¦ï¼</strong> ${funnyWrong[Math.floor(Math.random()*funnyWrong.length)]}<br>æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š<span class="font-black text-red-600">${correctAnswer}</span>`;messageDiv.className="message p-3 rounded-lg text-center bg-red-200 text-red-800";}
    current++;
    setTimeout(()=>{if(current<totalQuestions){showClues();submitButton.disabled=false;explainerButton.disabled=false;ttsButton.disabled=false;}else showResult();},2000);
}

function showResult(){document.getElementById('game').style.display="none";document.getElementById('result').style.display="block";document.getElementById('score').innerText=`ä½ ç¸½å…±ç­”å° ${score} / ${totalQuestions} ä½èŠ’æœå®¶æ—æˆå“¡ï¼`;}

// åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded',()=>{members=[...membersData];shuffleArray(members);showClues();});
</script>

</body>
</html>
